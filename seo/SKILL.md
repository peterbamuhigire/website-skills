---
name: seo
description: Comprehensive search engine optimization for static sites. Implements meta tags, JSON-LD structured data, sitemap generation, robots.txt, canonical URLs, and Open Graph tags. Reads from docs/seo.md for per-page configuration and docs/company-profile.md for organization schema. Generates SEO audit report. Run after page-builder, before deploy.
---

# SEO Skill — Static Website Factory

Implement comprehensive, production-grade search engine optimization across the entire site.

## Why This Matters

Our Astro + Tailwind + Alpine stack already crushes Core Web Vitals:
- **95-100 Lighthouse scores** (typical WordPress: 60-80)
- **Zero render-blocking JavaScript** (typical WordPress: 3-8 blocking resources)
- **Self-hosted everything** (fonts, no external CDN requests)
- **Image optimization built-in** (WebP/AVIF, responsive srcsets, lazy loading)

This skill layers on the meta, schema, and content SEO that completes the picture. Combined, our sites have a massive competitive advantage in search rankings.

---

## When This Runs

After page-builder, before deploy:

```
design-system → photo-manager → page-builder → [SEO] → deploy
```

The page-builder creates the HTML. This skill enriches it with metadata, structured data, and generates supporting files (sitemap config, robots.txt, audit report).

---

## What Gets Generated

### Files Created During Build
1. **robots.txt** — Allow all crawlers, point to sitemap
2. **sitemap-index.xml & sitemap-0.xml** — Auto-generated by @astrojs/sitemap plugin (configure in astro.config.mjs)
3. **seo-audit.md** — Human-readable audit of what was implemented

### Changes to Existing Files
1. **astro.config.mjs** — Add `@astrojs/sitemap` integration with serialization
2. **src/layouts/BaseLayout.astro** — Add `<head>` tags (meta, OG, canonical, JSON-LD)
3. **Each page in src/pages/** — Pass schema data to BaseLayout

### Nothing Deleted or Breaking
All changes are additive. If BaseLayout already exists, we enhance it. If astro.config has other integrations, we append sitemap.

---

## Inputs (Read These Files)

The skill reads from (in order):

1. **docs/seo.md** (NEW — template provided)
   - site_url: `https://client-domain.com`
   - Per-page title tags and meta descriptions
   - schema_type: (e.g., "LegalService", "MedicalBusiness", etc.)
   - geo-coordinates (if available)
   - google_site_verification code (optional)

2. **docs/company-profile.md**
   - name, tagline, description
   - phone, email
   - address (street, city, region, country)
   - founded year
   - social links (Facebook, LinkedIn, Twitter, etc.)

3. **docs/services.md** (if exists)
   - List of services with descriptions

4. **docs/team.md** (if exists)
   - Team member names, roles, photos

5. **docs/faq.md** (if exists)
   - Questions and answers

6. **docs/contact.md** (if exists)
   - Hours, address, contact info

7. **src/pages/*.astro** (existing pages)
   - Extract page titles, descriptions, content

---

## Implementation Steps

### Step 1: Add @astrojs/sitemap

Installs the Astro sitemap integration.

```bash
npx astro add sitemap -y
```

### Step 2: Update astro.config.mjs

```javascript
import { defineConfig } from 'astro/config';
import tailwind from '@astrojs/tailwind';
import sitemap from '@astrojs/sitemap';

export default defineConfig({
  site: 'https://client-domain.com',  // Read from docs/seo.md
  integrations: [
    tailwind(),
    sitemap({
      changefreq: 'monthly',
      priority: 0.7,
      lastmod: new Date(),
      serialize(item) {
        // Homepage: highest priority, weekly updates
        if (item.url.endsWith('/')) {
          item.priority = 1.0;
          item.changefreq = 'weekly';
        }
        // Contact/About: secondary priority
        if (item.url.includes('/contact') || item.url.includes('/about')) {
          item.priority = 0.8;
        }
        return item;
      },
    }),
  ],
});
```

### Step 3: Generate public/robots.txt

Create `public/robots.txt`:

```
User-agent: *
Allow: /

Sitemap: https://client-domain.com/sitemap-index.xml
```

### Step 4: Update BaseLayout.astro Head

Add SEO meta tags and JSON-LD injection capability:

```astro
---
interface Props {
  title: string;
  description: string;
  ogImage?: string;
  canonicalURL?: string;
  schemaData?: object[];
  noindex?: boolean;
}

const siteURL = 'https://client-domain.com';  // from docs/seo.md
const siteName = 'Company Name';  // from docs/company-profile.md

const {
  title,
  description,
  ogImage = '/og-image.png',
  canonicalURL = new URL(Astro.url.pathname, siteURL).href,
  schemaData = [],
  noindex = false,
} = Astro.props;

const fullOgImage = ogImage.startsWith('http')
  ? ogImage
  : new URL(ogImage, siteURL).href;
---

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Primary Meta -->
  <title>{title} | {siteName}</title>
  <meta name="description" content={description} />
  {noindex && <meta name="robots" content="noindex, nofollow" />}
  <link rel="canonical" href={canonicalURL} />

  <!-- Open Graph (Facebook, LinkedIn) -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content={canonicalURL} />
  <meta property="og:title" content={`${title} | ${siteName}`} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content={fullOgImage} />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:site_name" content={siteName} />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content={fullOgImage} />

  <!-- Sitemap Discovery -->
  <link rel="sitemap" href="/sitemap-index.xml" />

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

  <!-- JSON-LD Structured Data -->
  {schemaData.map((schema) => (
    <script type="application/ld+json" set:html={JSON.stringify(schema)} />
  ))}
</head>
```

### Step 5: Create Schema Utility

File: `src/utils/schema.ts` (or `.js`)

These functions generate JSON-LD structured data:

```typescript
export interface OrgConfig {
  siteURL: string;
  name: string;
  tagline: string;
  phone: string;
  email: string;
  streetAddress: string;
  city: string;
  region: string;
  countryCode: string;
  country: string;
  founded?: string;
  latitude?: number;
  longitude?: number;
  socialLinks?: string[];
  schemaType?: string;
}

// LocalBusiness / Organization (Homepage)
export function getOrganizationSchema(config: OrgConfig) {
  return {
    "@context": "https://schema.org",
    "@type": config.schemaType || "LocalBusiness",
    "@id": `${config.siteURL}/#organization`,
    "name": config.name,
    "description": config.tagline,
    "url": config.siteURL,
    "logo": `${config.siteURL}/logo.png`,
    "image": `${config.siteURL}/og-image.png`,
    "telephone": config.phone,
    "email": config.email,
    ...(config.founded && { "foundingDate": config.founded }),
    "address": {
      "@type": "PostalAddress",
      "streetAddress": config.streetAddress,
      "addressLocality": config.city,
      "addressRegion": config.region,
      "addressCountry": config.countryCode
    },
    ...(config.latitude && {
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": config.latitude,
        "longitude": config.longitude
      }
    }),
    ...(config.socialLinks?.length && {
      "sameAs": config.socialLinks.filter(Boolean)
    })
  };
}

// WebSite Schema (Homepage)
export function getWebSiteSchema(siteURL: string, name: string) {
  return {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "@id": `${siteURL}/#website`,
    "name": name,
    "url": siteURL
  };
}

// WebPage Schema (Every Page)
export function getWebPageSchema(
  siteURL: string,
  pageTitle: string,
  pageDesc: string,
  pageURL: string
) {
  return {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": pageTitle,
    "description": pageDesc,
    "url": pageURL,
    "isPartOf": {
      "@id": `${siteURL}/#website`
    }
  };
}

// BreadcrumbList (Inner Pages)
export function getBreadcrumbSchema(
  siteURL: string,
  pageTitle: string,
  pageURL: string
) {
  return {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": siteURL
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": pageTitle,
        "item": pageURL
      }
    ]
  };
}

// Service Schema
export function getServiceSchema(
  siteURL: string,
  serviceName: string,
  serviceDesc: string,
  country: string
) {
  return {
    "@context": "https://schema.org",
    "@type": "Service",
    "serviceType": serviceName,
    "description": serviceDesc,
    "provider": {
      "@id": `${siteURL}/#organization`
    },
    "areaServed": {
      "@type": "Country",
      "name": country
    }
  };
}

// Person Schema (Team Members)
export function getPersonSchema(
  siteURL: string,
  name: string,
  role: string,
  imageURL?: string
) {
  return {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": name,
    "jobTitle": role,
    "worksFor": {
      "@id": `${siteURL}/#organization`
    },
    ...(imageURL && { "image": imageURL })
  };
}

// FAQPage Schema
export function getFAQSchema(
  questions: Array<{ question: string; answer: string }>
) {
  return {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": questions.map(q => ({
      "@type": "Question",
      "name": q.question,
      "acceptedAnswer": {
        "@type": "Answer",
        "text": q.answer
      }
    }))
  };
}
```

### Step 6: Apply Schema to Pages

Each page passes appropriate schema to BaseLayout:

```astro
---
// Example: src/pages/index.astro (Homepage)
import BaseLayout from '../layouts/BaseLayout.astro';
import {
  getOrganizationSchema,
  getWebSiteSchema,
  getWebPageSchema,
} from '../utils/schema';

const orgConfig = {
  siteURL: 'https://client-domain.com',
  name: 'Company Name',
  // ... rest of config from docs/company-profile.md
};

const schemas = [
  getOrganizationSchema(orgConfig),
  getWebSiteSchema(orgConfig.siteURL, orgConfig.name),
  getWebPageSchema(
    orgConfig.siteURL,
    'Homepage Title',
    'Homepage description',
    orgConfig.siteURL
  ),
];
---

<BaseLayout
  title="Homepage Title from docs/seo.md"
  description="Homepage description from docs/seo.md"
  schemaData={schemas}
>
  <!-- homepage content -->
</BaseLayout>
```

```astro
---
// Example: src/pages/services.astro (Inner Page)
import BaseLayout from '../layouts/BaseLayout.astro';
import {
  getWebPageSchema,
  getBreadcrumbSchema,
  getServiceSchema,
} from '../utils/schema';

const orgConfig = { /* from docs */ };
const services = [
  { name: 'Service 1', description: '...' },
  { name: 'Service 2', description: '...' },
];

const schemas = [
  getWebPageSchema(orgConfig.siteURL, 'Services', 'Our services...', `${orgConfig.siteURL}/services`),
  getBreadcrumbSchema(orgConfig.siteURL, 'Services', `${orgConfig.siteURL}/services`),
  ...services.map(s =>
    getServiceSchema(orgConfig.siteURL, s.name, s.description, orgConfig.country)
  ),
];
---

<BaseLayout
  title="Services Title from docs/seo.md"
  description="Services description from docs/seo.md"
  schemaData={schemas}
>
  <!-- services content -->
</BaseLayout>
```

### Step 7: Image Alt Text Audit

Every `<img>` or `<Image>` tag must have meaningful alt text:

- **Team photos**: `"{name}, {role} at {company}"`
- **Hero images**: Describe the scene, include company name if relevant
- **Service images**: `"{service name} — {brief description}"`
- **Decorative images**: Use empty alt: `alt=""`

Cross-reference with `_catalog.json` from photo-manager skill.

### Step 8: Generate SEO Audit Report

File: `seo-audit.md` in project root

```markdown
# SEO Audit — [CompanyName]
Generated: [Date]

## Technical SEO
- [x] Sitemap: /sitemap-index.xml (auto-generated by @astrojs/sitemap)
- [x] Robots.txt: /robots.txt (allows all crawlers)
- [x] Canonical URLs: every page
- [x] Core Web Vitals: 95+ Lighthouse
  - LCP: < 1.0s
  - FID: < 100ms
  - CLS: < 0.1
- [x] Mobile-first responsive design

## Per-Page Meta Tags
| Page | Title (chars) | Meta Description (chars) | Status |
|------|---|---|---|
| / | "Homepage Title" (24) | "Homepage description..." (156) | ✅ |
| /about | "About CompanyName" (17) | "Learn about our team..." (158) | ✅ |
| /services | "Our Services" (12) | "Services offered..." (160) | ⚠️ (160 - at limit) |
| /contact | "Contact Us" (10) | "Get in touch..." (145) | ✅ |

## Structured Data (JSON-LD)
- [x] Organization/LocalBusiness schema on homepage
- [x] WebSite schema on homepage
- [x] WebPage schema on all pages
- [x] BreadcrumbList schema on inner pages (auto-generated)
- [x] Service schema on services page (3 services)
- [ ] FAQ schema (no FAQ section found)
- [ ] Person schema (no team page found)

## Images
- Total images: 12
- With descriptive alt text: 12 ✅
- Missing alt text: 0 ✅

## Open Graph / Social Sharing
- OG image: /og-image.png (1200x630px) ✅
- Twitter Card: configured ✅
- Facebook preview: ready ✅

## SEO Checklist
- [x] Site URL configured in astro.config.mjs
- [x] Sitemap generates at build time
- [ ] Google Search Console: [Not submitted — client action]
- [ ] Google Business Profile: [Not created — client action]
- [ ] Bing Webmaster Tools: [Not submitted — client action]
- [ ] Local directory listings: [Not submitted — client action]
- [ ] NAP consistency verified: [Awaiting client review]

## Recommendations
1. Add FAQ section to /contact page for "FAQPage" schema
2. Create /team page for "Person" schema (credibility boost)
3. Verify business address is accurate (used in LocalBusiness schema)
4. Request initial Google reviews once Business Profile is live
5. Monitor Core Web Vitals in Google Search Console monthly

## Performance Summary
- Lighthouse SEO Score: 100/100
- Mobile Usability: Passes
- Core Web Vitals Status: All Green
- Crawlability: Perfect
```

---

## Validation Rules

1. **Title tags:** 50-60 characters max. Flag any exceeding 60.
2. **Meta descriptions:** 150-160 characters max. Flag any exceeding 160.
3. **One H1 per page.** H1 should match (closely) the `<title>` tag.
4. **Heading hierarchy:** No skipped levels (no H1 → H3).
5. **Internal links:** Every page reachable within 2 clicks from homepage.
6. **Alt text:** Every image has meaningful alt text (not empty unless decorative).
7. **Canonical URLs:** Every page has a canonical (Astro does this by default).
8. **JSON-LD validity:** No trailing commas, proper escaping, valid syntax.
9. **No duplicate titles/descriptions:** Every page must be unique.
10. **Schema types accuracy:** Use most specific type (e.g., `LegalService` not `LocalBusiness` for law firms).

---

## Post-Launch Checklist (Output to docs/SEO-NEXT-STEPS.md)

This skill generates a checklist of manual actions the client must take:

```markdown
# Post-Launch SEO Checklist

## Week 1
- [ ] Submit sitemap to Google Search Console: https://search.google.com/search-console
- [ ] Set up Google Business Profile: https://business.google.com
  - Fill in every field: name, address, phone, hours, categories
  - Upload 10+ photos
  - Ensure NAP consistency (name, address, phone matches website exactly)

## Week 2
- [ ] Submit sitemap to Bing Webmaster Tools: https://www.bing.com/webmasters
- [ ] Submit to local directories:
  - Yellow Pages UG
  - Uganda Business Directory
  - Industry-specific directories (if applicable)
- [ ] Verify NAP consistency across all listings

## Month 1
- [ ] Monitor Google Search Console for crawl errors
- [ ] Request initial reviews on Google Business Profile
- [ ] Monitor Core Web Vitals dashboard in Search Console
- [ ] Set up Google Analytics 4 (optional but recommended)

## Ongoing (Monthly)
- [ ] Post regular updates to Google Business Profile
- [ ] Monitor search traffic in Google Search Console
- [ ] Review any manual actions or violations
- [ ] Request new reviews from satisfied clients
- [ ] Update content seasonally (if applicable)
```

---

## Output Summary

After running this skill, the project has:

✅ **robots.txt** — Allows crawlers, points to sitemap
✅ **Sitemap auto-generated** — By @astrojs/sitemap plugin
✅ **Meta tags on every page** — Title, description, canonical, OG
✅ **JSON-LD structured data** — Organization, WebSite, WebPage, BreadcrumbList, Services, People, FAQ
✅ **BaseLayout enhanced** — Supports schema injection
✅ **SEO audit report** — What was implemented, what needs manual action
✅ **Post-launch checklist** — Google Business Profile setup, directory submissions, monitoring

**Result:** A site that's technically perfect for search engines, ready for the client's ongoing SEO efforts (Google Business Profile, directory listings, reviews, content updates).

---

## References

- [Google Search Central](https://developers.google.com/search)
- [JSON-LD Schema.org](https://schema.org/)
- [@astrojs/sitemap docs](https://docs.astro.build/en/guides/integrations-guide/sitemap/)
- [Core Web Vitals guide](https://web.dev/vitals/)
- [LocalBusiness Schema](https://schema.org/LocalBusiness)
